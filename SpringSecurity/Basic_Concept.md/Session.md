### 목차
- [세션기반 인증(Session-based Authentication)](#세션기반-인증session-based-authentication)
  - [로그인](#로그인)
  - [로그아웃](#로그아웃)
## 세션기반 인증(Session-based Authentication)
### 로그인
- ![image](https://user-images.githubusercontent.com/102513932/202377503-a659fb9b-fc90-4c34-9cd6-0595028a6eb5.png)
  - 로그인 시 사용자가 정확한 아이디와 비밀번호를 입력하면, 서버는 인증에 성공했다고 판단함
  - 다음번에 인증을 필요로 하는 작업(ex 장바구니에 물품 추가)을 요청할 경우 또 로그인 진행?
    - 서버가 해당 유저에 대해 인증을 성공했다는 사실을 알고 있다면, 유저는 매번 로그인을 할 필요가 없음
  - 서버는 사용자가 인증에 성공했음을 알고 있어야함
  - 클라이언트는 인증 성공을 증명할 수단을 가져야 함
- 사용자가 인증에 성공한 상태를 **세션**이라 부름
  - 서버는 일종의 저장소에 세션을 저장함 (위 그림 2번)
    - 주로 in-memory, 세션 스토어등에 저장함
  - 세션이 만들어지면, 각 세션을 구분할 수 있는 **세션 아이디**도 만들어짐( 위 그림 3번)
  - 클라이언트에 세션 성공을 증명할 수단으로써 세션 아이디를 전달(위 그림 4번)
- 이때 웹사이트에서 로그인을 유지하기 위한 수단으로 **쿠키** 사용
  - 쿠키에 서버에서 발급한 세션 아이디 저장
- 쿠키를 통해 유효한 세션 아이디가 서버에 전달(위 그림 5번)
- 세션 스토어에서 해당 세션 존재 시(위 그림 7번)
- 서버는 해당 요청에 접근 가능하다 판단 (위 그림 7, 8번)
- 만약 쿠키에 세션 아이디 정보가 없는 경우, 서버는 해당 요청이 인증되지 않았음을 알려줌

### 로그아웃
- 세션 아이디가 담긴 쿠키는 클라이언트에 저장되어 있음
- 서버는 세션을 저장하고 있음
- 서버는 단지 세션 아이디로만 인증 여부를 판단
- 로그아웃 시
  - 서버 : 세션 정보를 삭제해야 함
  - 클라이언트 : 쿠키를 갱신해야 함
- 서버가 클라이언트의 쿠키를 임의로 삭제할 수는 없음
  - 대신, set-cookie를 통해 클라이언트에게 쿠키를 전송할 때 세션 아이디의 키값을 무효한 값으로 갱신할 수 있음

> 참고: 쿠키는 세션 아이디, 즉 인증 성공에 대한 증명을 갖고 있으므로, 탈취될 경우 서버는 해당 요청이 인증된 사용자의 요청이라고 판단함 <br>
> 이것이 공공 PC에서 로그아웃을 해야 하는 이유임

![image](https://user-images.githubusercontent.com/102513932/202400593-ab6e96d2-0da4-44e6-bf4e-d51c019a3443.png)